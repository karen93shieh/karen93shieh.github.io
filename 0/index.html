<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Project 0 ¬∑ CS180</title>

  <!-- PRE-PAINT THEME: must run before CSS loads -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem('theme');
        const initial = (saved === 'light' || saved === 'dark')
          ? saved
          : (window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
        document.documentElement.setAttribute('data-theme', initial);
      } catch {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    })();
  </script>

  <!-- Cache-bust to avoid GitHub Pages serving old CSS -->
  <link rel="stylesheet" href="./styles.css?v=3" />
</head>

<body>
  <div class="wrap">
    <nav class="crumbs">
      <a href="../index.html">‚Üê Back to Home</a>
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle color theme" title="Toggle color theme">
        <span class="theme-icon" id="themeIcon">üåô</span>
        <span id="themeLabel">Dark</span>
      </button>
    </nav>

    <header class="hero">
      <h1>Project 0: Becoming Friends with Your Camera</h1>
      <p class="subtitle">Become friends with every pixel.</p>
      <ul class="meta">
        <!-- <li><strong>Course:</strong> CS180</li> -->
        <li><strong>Date:</strong> Sep 2025</li>
      </ul>
    </header>

    <main class="grid">

      <!-- Part 1 -->
      <article class="card">
        <h2>Part 1: Selfie ‚Äî The Wrong Way vs. The Right Way</h2>
        <p><strong>Description:</strong> Close up shot ‚Üí Far shot with zoom</p>
        <p><strong>Summary:</strong> This happens because of <b>perspective distortion</b>. Taking a selfie up close with a wide-angle lense creates strong perspective distortion. Proportions look more natural when stepped back and zoomed in because the longer focal length compresses perspective.</p>
        <div class="gallery" data-group="part1">
          <img src="./media/a1.jpg" alt="Part 1 image 1" />
          <img src="./media/a2.jpg" alt="Part 1 image 2" />
          <img src="./media/a3.jpg" alt="Part 1 image 3" />
          <img src="./media/a4.jpg" alt="Part 1 image 4" />
          <img src="./media/a5.jpg" alt="Part 1 image 5" />
        </div>
      </article>

      <!-- Part 2 -->
      <article class="card">
        <h2>Part 2: Architectural Perspective Compression</h2>
        <p><strong>Description:</strong> Zoom in ‚Üí Walk down</p>
        <p><strong>Summary:</strong> Zooming in from a distance flattens perspective; on the other hand, moving closer up exaggerates the depth.</p>
        <div class="gallery" data-group="part2">
          <img src="./media/b1.jpg" alt="Part 2 image 1" />
          <img src="./media/b2.jpg" alt="Part 2 image 2" />
        </div>
      </article>

      <!-- Part 3 -->
      <article class="card">
        <h2>Part 3: The Dolly Zoom</h2>
        <p><strong>Description:</strong> The dolly zoom effect using static pictures.</p>

        <!-- Existing GIF -->
        <figure class="media" data-group="part3">
          <img src="./media/c1.gif" alt="Part 3 gif" />
          <figcaption>Figure: GIF demonstration of dolly zoom.</figcaption>
        </figure>

        <!-- New Video -->
        <figure class="media">
          <video autoplay muted loop playsinline width="100%">
            <source src="./media/c2.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <figcaption>Figure: Video demonstration of dolly zoom (focus on the pillow to see a clearer effect).</figcaption>
        </figure>
      </article>


      <!-- Resources -->
      <article class="card">
        <h2>Links</h2>
        <ul>
          <li><a href="https://cal-cs180.github.io/fa25/hw/proj0/index.html" target="_blank" rel="noopener">Project Description</a></li>
          <li><a href="https://github.com/karen93shieh/karen93shieh.github.io" target="_blank" rel="noopener">Source code</a></li>
          <li><a href="../index.html">Home</a></li>
        </ul>
      </article>
    </main>

    <!-- Lightbox modal (unchanged) -->
    <div id="lightbox" class="lb" aria-hidden="true">
      <button class="lb-close" aria-label="Close">√ó</button>
      <button class="lb-prev" aria-label="Previous">‚Äπ</button>
      <img class="lb-img" alt="" />
      <div class="lb-cap" role="note"></div>
      <button class="lb-next" aria-label="Next">‚Ä∫</button>
    </div>

    <footer class="foot">
      ¬© <span id="y"></span> Karen Shieh ‚Äî CS180
    </footer>
  </div>

  <!-- Lightbox JS (unchanged) -->
  <script>
  (() => {
    const modal = document.getElementById('lightbox');
    const imgEl = modal.querySelector('.lb-img');
    const capEl = modal.querySelector('.lb-cap');
    const btnPrev = modal.querySelector('.lb-prev');
    const btnNext = modal.querySelector('.lb-next');
    const btnClose = modal.querySelector('.lb-close');

    const groups = {};
    document.querySelectorAll('.gallery[data-group], .media[data-group]').forEach(container => {
      const groupName = container.dataset.group;
      const items = Array.from(container.querySelectorAll('img'));
      groups[groupName] = items;
      items.forEach((img, idx) => {
        img.dataset.group = groupName;
        img.dataset.index = idx;
        img.addEventListener('click', openFromThumb);
      });
    });

    let currentGroup = null;
    let currentIndex = 0;
    let prevFocus = null;

    function openFromThumb(e) {
      const t = e.currentTarget;
      currentGroup = t.dataset.group;
      currentIndex = parseInt(t.dataset.index, 10);
      openLightbox();
    }
    function openLightbox() {
      const list = groups[currentGroup];
      if (!list || !list.length) return;
      const node = list[currentIndex];
      show(node.src, node.alt || '');
      prevFocus = document.activeElement;
      document.body.style.overflow = 'hidden';
      modal.setAttribute('aria-hidden','false');
      btnClose.focus();
      addListeners(true);
    }
    function closeLightbox() {
      modal.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      addListeners(false);
      if (prevFocus && typeof prevFocus.focus === 'function') prevFocus.focus();
    }
    function show(src, alt) { imgEl.src = src; imgEl.alt = alt; capEl.textContent = alt; }
    function next() {
      const list = groups[currentGroup];
      currentIndex = (currentIndex + 1) % list.length;
      const node = list[currentIndex];
      show(node.src, node.alt || '');
    }
    function prev() {
      const list = groups[currentGroup];
      currentIndex = (currentIndex - 1 + list.length) % list.length;
      const node = list[currentIndex];
      show(node.src, node.alt || '');
    }
    function onKey(e) {
      if (modal.getAttribute('aria-hidden') === 'true') return;
      if (e.key === 'Escape') closeLightbox();
      else if (e.key === 'ArrowRight') next();
      else if (e.key === 'ArrowLeft') prev();
    }
    function onBackdropClick(e) { if (e.target === modal) closeLightbox(); }
    let x0 = null;
    function onTouchStart(e){ x0 = e.changedTouches[0].clientX; }
    function onTouchEnd(e){
      if (x0 == null) return;
      const dx = e.changedTouches[0].clientX - x0;
      if (Math.abs(dx) > 40) (dx < 0 ? next : prev)();
      x0 = null;
    }
    function addListeners(on) {
      const method = on ? 'addEventListener' : 'removeEventListener';
      document[method]('keydown', onKey);
      modal[method]('click', onBackdropClick);
      imgEl[method]('touchstart', onTouchStart, {passive:true});
      imgEl[method]('touchend', onTouchEnd, {passive:true});
    }
    btnClose.addEventListener('click', closeLightbox);
    btnNext.addEventListener('click', next);
    btnPrev.addEventListener('click', prev);
  })();
  </script>

  <script>
    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Theme toggle
    const root = document.documentElement;
    const btn = document.getElementById('themeToggle');
    const icon = document.getElementById('themeIcon');
    const label = document.getElementById('themeLabel');

    function syncButton() {
        const mode = root.getAttribute('data-theme');
        if (mode === 'light') { icon.textContent = 'üåû'; label.textContent = 'Light'; }
        else { icon.textContent = 'üåô'; label.textContent = 'Dark'; }
    }
    syncButton();

    btn.addEventListener('click', () => {
        const current = root.getAttribute('data-theme');
        const next = current === 'light' ? 'dark' : 'light';
        root.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
        syncButton();
    });
    </script>
</body>
</html>
